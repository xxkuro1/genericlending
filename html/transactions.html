<!DOCTYPE html>

<html>



	<head>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"> </script>
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <link href="../css/skeleton.css" rel="stylesheet" type="text/css">
        <link href="../css/normalize.css" rel="stylesheet" type="text/css">
	</head>
	<style>
        td, th {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 8px;
        }


        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

	</style>

	<body>
	<div class="search">

		<br>
		<center>
			<form >
                <input class="inputsearch" id="inputsearch" name="search" onkeyup="filterTable()" type="text"><br>
			</form>
		</center>
	</div>

				<div class="table">
                    <table id="tableID" width="50%">
                        <thead>
                        <tr>
                            <th>Transaction ID</th>
                            <th>FirstName</th>
                            <th>LastName</th>
                            <th>Address</th>
                            <th>Actions</th>
                        </tr>
                        <tbody id="tablebody">

                        </tbody>
                        </thead>

                    </table>
			</div>



	</body>
    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                url: "../php/view.php",
                type: "POST",
                cache: false,
                success: function (response) {
                    //alert(response);
                    $("#tablebody").html(response);
                }
            });

        });

        function deleteData(id) {
            let inputsearch = $("#inputsearch");
            inputsearch.val("");
            $.ajax({
                url: "../php/delete.php",
                type: "POST",
                data: {
                    key: "delete",
                    id: id
                },
                cache: false,
                success: function (response) {
                    alert(response);
                    $("#transaction_id_" + id).parent().remove();
                }
            });

        }

        function filterTable() {
            // ES declarations
            let input, filter, table, tr, td, i, txtval;
            input = document.getElementById("inputsearch");
            filter = input.value.toUpperCase();
            table = document.getElementById("tablebody");
            tr = table.getElementsByTagName("tr");

            //loop through the rows
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[1];
                if (td) {
                    txtval = td.textContent || td.innerText;
                    if (txtval.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }


        /*
                     function searchData(id){
                        //alert(id);
                        $.ajax({
                        url: "../php/search.php",
                        type: "POST",
                        data:{
                            key: "search",
                            id: id
                        },
                        cache: false,
                        success: function (response) {
                            alert(response);
                            //$("#transaction_id_"+id).parent().remove();
                            $("#tablebody").html(response);
                        }
                        });

                    }


        * */



    </script>
	</html>